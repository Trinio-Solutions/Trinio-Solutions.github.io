"use strict";(self.webpackChunktriniodashboard=self.webpackChunktriniodashboard||[]).push([[51],{6051:(C,p,n)=>{n.r(p),n.d(p,{ScrumboardModule:()=>y});var u=n(8583),g=n(6901),c=n(8239),_=n(6215),e=n(639),T=n(4761),v=n(196),b=n(4105),h=n(2555);function k(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",66),e.TgZ(1,"div",67),e.TgZ(2,"h6",68),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",69),e._uU(5),e.qZA(),e.TgZ(6,"div",70),e.TgZ(7,"small",71),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"theme-icon",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,d=e.oxw().$implicit,i=e.oxw(),s=e.MAs(33);return i.selectedList=d,i.selectedTask=r,s.open()}),e.qZA(),e.TgZ(11,"theme-icon",73),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,d=e.oxw().$implicit,i=e.oxw(),s=e.MAs(37);return i.selectedList=d,i.selectedTask=r,s.open()}),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.uIk("data-task",t.BoardTaskId),e.xp6(3),e.Oqu(t.BoardTaskName),e.xp6(2),e.hij(" ",t.BoardTaskDescription," "),e.xp6(3),e.Oqu(e.xi3(9,4,t.UpdatedAt,"medium"))}}function A(a,l){if(1&a&&(e.ynx(0),e.YNc(1,k,12,7,"div",65),e.BQk()),2&a){const t=l.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.BoardList.BoardListId==o.BoardListId)}}function f(a,l){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",44),e.TgZ(2,"div",45),e.TgZ(3,"div",46),e.TgZ(4,"h6",47),e._uU(5),e.qZA(),e.TgZ(6,"div",48),e.TgZ(7,"a",49),e.O4$(),e.TgZ(8,"svg",50),e._UZ(9,"circle",51),e._UZ(10,"circle",52),e._UZ(11,"circle",53),e.qZA(),e.qZA(),e.kcU(),e.TgZ(12,"div",54),e.TgZ(13,"a",55),e.NdJ("click",function(){const d=e.CHM(t).$implicit,i=e.oxw(),s=e.MAs(10);return i.selectedList=d,s.open()}),e._uU(14,"Edit"),e.qZA(),e.TgZ(15,"a",56),e.NdJ("click",function(){const d=e.CHM(t).$implicit,i=e.oxw(),s=e.MAs(61);return i.selectedList=d,s.open()}),e._uU(16,"Delete"),e.qZA(),e.TgZ(17,"a",57),e._uU(18,"Clear All"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",58),e.YNc(20,A,2,1,"ng-container",6),e.ALo(21,"async"),e.qZA(),e.TgZ(22,"div",59),e.TgZ(23,"a",60),e.NdJ("click",function(){const d=e.CHM(t).$implicit,i=e.oxw(),s=e.MAs(33);return i.selectedList=d,i.selectedTask=null,s.open()}),e.O4$(),e.TgZ(24,"svg",61),e._UZ(25,"circle",62),e._UZ(26,"line",63),e._UZ(27,"line",64),e.qZA(),e._uU(28," Add Task"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&a){const t=l.$implicit,o=e.oxw();e.xp6(5),e.hij(" ",t.BoardListName," "),e.xp6(14),e.uIk("data-list",t.BoardListId),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,3,o.$taskList))}}function L(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",30),e.TgZ(2,"h5",12),e._uU(3),e.qZA(),e.TgZ(4,"button",13),e.TgZ(5,"span",14),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",74),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div",16),e.TgZ(11,"label"),e._uU(12,"Task Name"),e.qZA(),e._UZ(13,"input",18,75),e.qZA(),e.TgZ(15,"div",16),e.TgZ(16,"label",17),e._uU(17,"Task Description"),e.qZA(),e._UZ(18,"textarea",76,77),e.qZA(),e.qZA(),e.TgZ(20,"div",40),e.TgZ(21,"button",22),e._uU(22," Close "),e.qZA(),e.TgZ(23,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(14),d=e.MAs(19),i=e.oxw(),s=e.MAs(33);return i.createOrEditTask(r.value,d.value),r.value="",d.value="",s.close(),i.selectedTask=null}),e._uU(24," Save "),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.selectedTask?"Edit Task :"+t.selectedTask.BoardTaskName:"Add task"),e.xp6(6),e.hij("Task will be created in ",t.selectedList.BoardListName,""),e.xp6(4),e.Q6J("value",null==t.selectedTask?null:t.selectedTask.BoardTaskName),e.xp6(5),e.Q6J("value",null==t.selectedTask?null:t.selectedTask.BoardTaskDescription)}}const x=function(){return{suppressScrollX:!1}},q=[{path:"",component:(()=>{class a{constructor(t){this.apiService=t,this.$scrumboardList=new _.X([]),this.$taskList=new _.X([])}ngOnInit(){this.refreshScrumboardList()}refreshScrumboardList(){var t=this;return(0,c.Z)(function*(){let o=yield t.apiService.authorizedGet("scrumBoard","getAllLists").toPromise(),r=[];yield Promise.all(o.Data.map(d=>t.apiService.authorizedGet("scrumBoard","getAllTasksOfList?BoardListId="+d.BoardListId).toPromise().then(i=>(r.push(...i.Data.sort((s,m)=>s.Order-m.Order)),0)))),console.log(o.Data,r),t.$taskList.next(r),t.$scrumboardList.next(o.Data)})()}createOrEditList(t){var o=this;return(0,c.Z)(function*(){var r,d;o.selectedList?yield o.apiService.authorizedPut("scrumBoard","updateList",{BoardListId:o.selectedList.BoardListId,UpdatedBy:null===(d=o.apiService.authService.user)||void 0===d?void 0:d.UserId,BoardListName:t}).toPromise():yield o.apiService.authorizedPost("scrumBoard","newList",{CreatedBy:null===(r=o.apiService.authService.user)||void 0===r?void 0:r.UserId,BoardListName:t}).toPromise(),o.refreshScrumboardList()})()}initScrumboardUi(){$(".connect-sorting-content").sortable({connectWith:".connect-sorting-content",placeholder:"ui-state-highlight",update:(t,o)=>{let r={};r[t.target.getAttribute("data-list")]=[],console.log(t.target);for(let d of t.target.children)r[t.target.getAttribute("data-list")].push(d.getAttribute("data-task"));this.updateList(r)}})}updateList(t){var o=this;return(0,c.Z)(function*(){var r;let d=[];for(let i of Object.keys(t))for(let[s,m]of t[Number(i)].entries()){let Z=o.$taskList.getValue().filter(U=>U.BoardTaskId==m)[0];(Z.BoardList.BoardListId!=Number(i)||Z.Order!=s)&&d.push(o.apiService.authorizedPut("scrumBoard","updateTask",{BoardTaskId:Z.BoardTaskId,BoardListId:Number(i),CreatedBy:null===(r=o.apiService.authService.user)||void 0===r?void 0:r.UserId,Order:s}).toPromise())}yield Promise.all(d),o.refreshScrumboardList()})()}ngAfterViewChecked(){this.initScrumboardUi()}createOrEditTask(t,o){var r=this;return(0,c.Z)(function*(){var d,i;if(r.selectedTask)yield r.apiService.authorizedPut("scrumBoard","updateTask",{BoardTaskId:r.selectedTask.BoardTaskId,BoardTaskName:t,BoardTaskDescription:o,BoardListId:r.selectedList.BoardListId,CreatedBy:null===(i=r.apiService.authService.user)||void 0===i?void 0:i.UserId}).toPromise();else{let s=r.$taskList.getValue().filter(m=>m.BoardList.BoardListId=r.selectedList.BoardListId).length;yield r.apiService.authorizedPost("scrumBoard","newTask",{BoardTaskName:t,BoardTaskDescription:o,BoardListId:r.selectedList.BoardListId,CreatedBy:null===(d=r.apiService.authService.user)||void 0===d?void 0:d.UserId,Order:s}).toPromise()}r.refreshScrumboardList()})()}deleteSelectedTask(){var t=this;return(0,c.Z)(function*(){yield t.apiService.authorizedDelete("scrumBoard","deleteTask?BoardTaskId="+t.selectedTask.BoardTaskId).toPromise(),t.refreshScrumboardList()})()}deleteSelectedScrumBoardList(){var t=this;return(0,c.Z)(function*(){yield t.apiService.authorizedDelete("scrumBoard","deleteList?BoardListId="+t.selectedList.BoardListId).toPromise(),t.refreshScrumboardList()})()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(T.s))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-scrumboard"]],decls:84,vars:8,consts:[[1,"scrumboard","flex-item","flex-col",2,"overflow","auto"],[2,"margin","5px"],["id","add-list",1,"btn","btn-primary",3,"click"],["themePerfectScroll","",1,"flex-item",3,"options"],[1,"layout-spacing"],[1,"task-list-section",2,"overflow","visible"],[4,"ngFor","ngForOf"],["appModal","","id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["addListModal","modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-bottom","solid 1px black"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body",2,"border-bottom","solid 1px black"],[1,"form-group"],["for",""],["type","text","aria-describedby","helpId","placeholder","",1,"form-control",3,"value"],["newListName",""],["id","helpId",1,"form-text","text-muted"],[1,"modal-footer",2,"border-top","none"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["appModal","",1,"modal","fade"],["addTaskModal","modal"],["class","modal-content",4,"ngIf"],["appModal","","id","deleteConformation","tabindex","-1","role","dialog","aria-labelledby","deleteConformationLabel","aria-hidden","true",1,"modal","fade"],["confirmTaskDelete","modal"],["id","deleteConformationLabel",1,"modal-content"],[1,"modal-header"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-trash-2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body",2,"border-bottom","0"],[1,""],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn"],["type","button","data-remove","task",1,"btn","btn-danger",3,"click"],["confirmListDelete","modal"],[1,"task-list-container","flex-col",2,"justify-content","space-between"],[1,"connect-sorting"],[1,"task-container-header"],["data-listTitle","In Progress",1,"s-heading"],[1,"dropdown"],["href","#","role","button","id","dropdownMenuLink-1","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"dropdown-toggle"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-more-horizontal"],["cx","12","cy","12","r","1"],["cx","19","cy","12","r","1"],["cx","5","cy","12","r","1"],["aria-labelledby","dropdownMenuLink-1",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0);",1,"dropdown-item","list-edit",3,"click"],["href","javascript:void(0);",1,"dropdown-item","list-delete",3,"click"],["href","javascript:void(0);",1,"dropdown-item","list-clear-all"],["data-sortable","true",1,"connect-sorting-content"],[1,"add-s-task"],[1,"addTask",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-plus-circle"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["data-draggable","true","class","card img-task",4,"ngIf"],["data-draggable","true",1,"card","img-task"],[1,"card-header","flex-row"],[1,"flex-item",2,"margin","0"],[1,"card-body","flex-col",2,"padding","10px"],[1,"card-footer","flex-row",2,"align-items","center"],[1,"flex-item"],["icon","pen","classes","c-accent",3,"click"],["icon","delete","classes","c-danger",3,"click"],[1,"modal-body","flex-col"],["taskName",""],[1,"form-control",3,"value"],["taskDescription",""]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(r);const i=e.MAs(10);return o.selectedList=null,i.open()}),e._uU(3," Add List "),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.YNc(7,f,29,5,"ng-container",6),e.ALo(8,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7,8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"h5",12),e._uU(15),e.qZA(),e.TgZ(16,"button",13),e.TgZ(17,"span",14),e._uU(18,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"div",16),e.TgZ(21,"label",17),e._uU(22,"List Name"),e.qZA(),e._UZ(23,"input",18,19),e.TgZ(25,"small",20),e._uU(26,"Enter the name of new list"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",21),e.TgZ(28,"button",22),e._uU(29," Close "),e.qZA(),e.TgZ(30,"button",23),e.NdJ("click",function(){e.CHM(r);const i=e.MAs(24),s=e.MAs(10);return o.createOrEditList(i.value),i.value="",s.close(),o.selectedList=null}),e._uU(31," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",24,25),e.TgZ(34,"div",9),e.YNc(35,L,25,4,"div",26),e.qZA(),e.qZA(),e.TgZ(36,"div",27,28),e.TgZ(38,"div",9),e.TgZ(39,"div",29),e.TgZ(40,"div",30),e.TgZ(41,"div",31),e.O4$(),e.TgZ(42,"svg",32),e._UZ(43,"polyline",33),e._UZ(44,"path",34),e._UZ(45,"line",35),e._UZ(46,"line",36),e.qZA(),e.qZA(),e.kcU(),e.TgZ(47,"h5",37),e._uU(48,"Delete the task?"),e.qZA(),e.TgZ(49,"button",13),e.TgZ(50,"span",14),e._uU(51,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",38),e.TgZ(53,"p",39),e._uU(54," If you delete the task it will be gone forever. Are you sure you want to proceed? "),e.qZA(),e.qZA(),e.TgZ(55,"div",40),e.TgZ(56,"button",41),e._uU(57,"Cancel"),e.qZA(),e.TgZ(58,"button",42),e.NdJ("click",function(){e.CHM(r);const i=e.MAs(37);return o.deleteSelectedTask(),i.close()}),e._uU(59," Delete "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",27,43),e.TgZ(62,"div",9),e.TgZ(63,"div",29),e.TgZ(64,"div",30),e.TgZ(65,"div",31),e.O4$(),e.TgZ(66,"svg",32),e._UZ(67,"polyline",33),e._UZ(68,"path",34),e._UZ(69,"line",35),e._UZ(70,"line",36),e.qZA(),e.qZA(),e.kcU(),e.TgZ(71,"h5",37),e._uU(72,"Delete the task?"),e.qZA(),e.TgZ(73,"button",13),e.TgZ(74,"span",14),e._uU(75,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",38),e.TgZ(77,"p",39),e._uU(78," If you delete the list and all its associated tasks will be gone forever. Are you sure you want to proceed? "),e.qZA(),e.qZA(),e.TgZ(79,"div",40),e.TgZ(80,"button",41),e._uU(81,"Cancel"),e.qZA(),e.TgZ(82,"button",42),e.NdJ("click",function(){e.CHM(r);const i=e.MAs(61);return o.deleteSelectedScrumBoardList(),i.close()}),e._uU(83," Delete "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(4),e.Q6J("options",e.DdM(7,x)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(8,5,o.$scrumboardList)),e.xp6(8),e.Oqu(o.selectedList?"Edit list"+(null==o.selectedList?null:o.selectedList.BoardListName):"Create New List"),e.xp6(8),e.Q6J("value",null==o.selectedList?null:o.selectedList.BoardListName),e.xp6(12),e.Q6J("ngIf",o.selectedList))},directives:[v.X,u.sg,b.o,u.O5,h.o],pipes:[u.Ov,u.uU],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:solid 1px black}.modal-body[_ngcontent-%COMP%]{border-bottom:solid 1px black}.modal-footer[_ngcontent-%COMP%]{border:none}"]}),a})(),children:[]}];let B=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[g.Bz.forChild(q)],g.Bz]}),a})();var S=n(4466);let y=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[u.ez,S.m,B]]}),a})()}}]);